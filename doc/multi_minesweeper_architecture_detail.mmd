flowchart TB
    subgraph "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"
        direction TB
        Browser["ãƒ–ãƒ©ã‚¦ã‚¶ ğŸŒ"]

        subgraph "Vue.js + Inertia.js"
            direction TB
            SinglePlayer["ã‚·ãƒ³ã‚°ãƒ«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ"]
            MultiPlayer["ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ"]
            GameBoard["ã‚²ãƒ¼ãƒ ãƒœãƒ¼ãƒ‰\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ"]
            PiniaStore["Pinia ã‚¹ãƒˆã‚¢\n(ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç†)"]
        end

        Browser --> SinglePlayer & MultiPlayer
        SinglePlayer & MultiPlayer --> GameBoard
        SinglePlayer <--> PiniaStore
    end

    subgraph "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰"
        direction TB

        subgraph "Controllerå±¤"
            MineController["MinesweeperController\n- ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†\n- ã‚²ãƒ¼ãƒ æƒ…å ±æ›´æ–°å‡¦ç†\n- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ"]
            MultiController["MultiplayerController\n- ãƒ«ãƒ¼ãƒ ç®¡ç†\n- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ å‡¦ç†\n- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ"]
        end

        subgraph "Serviceå±¤"
            MineService["MinesweeperService\n- ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†"]
            MultiService["MultiplayerService\n- ãƒ«ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†\n- ã‚¿ãƒ¼ãƒ³å‡¦ç†\n- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†"]
        end

        subgraph "Domainå±¤"
            GameService["GameService\n- ã‚³ã‚¢ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯"]
            Tile["Tile\n- ã‚¿ã‚¤ãƒ«ã®çŠ¶æ…‹ã¨æŒ¯ã‚‹èˆã„"]
            Board["Board\n- ãƒœãƒ¼ãƒ‰ç”Ÿæˆ\n- åœ°é›·é…ç½®"]
        end

        subgraph "Repositoryå±¤"
            RoomRepo["RoomCompositeRepository\n- ãƒ«ãƒ¼ãƒ CRUDæ“ä½œ\n- å‚åŠ è€…ç®¡ç†"]
            MinesweeperRepo["MinesweeperCompositeRepository\n- ãƒœãƒ¼ãƒ‰CRUDæ“ä½œ"]
        end

        subgraph "Dataå±¤"
            DB[("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹\n(MySQL)")]
            Cache[("ã‚­ãƒ£ãƒƒã‚·ãƒ¥\n(Redis)")]
        end

        subgraph "WebSocket"
            Echo["Laravel Echo\n(ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡)"]
            Reverb["laravel reverb\n(webSocketã‚µãƒ¼ãƒ)"]
        end
    end


%% æ¥ç¶šé–¢ä¿‚
    Browser <--> MineController & MultiController
    MultiPlayer <-.-> Echo
    MineController --> MineService
    MultiController --> MultiService
    MineService --> GameService
    MultiService --> GameService
    MineService --> MinesweeperRepo
    MultiService --> RoomRepo
    GameService --> Tile & Board
    RoomRepo --> DB
    MinesweeperRepo --> DB
    RoomRepo --> Cache
    MinesweeperRepo --> Cache
    MultiService --> Cache
%% ã‚¯ãƒ©ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«
    classDef client fill: #dbeafe, stroke: #3b82f6, stroke-width: 2px, color: #1e3a8a
    classDef controller fill: #bbf7d0, stroke: #22c55e, stroke-width: 2px, color: #166534
    classDef service fill: #fef3c7, stroke: #f59e0b, stroke-width: 2px, color: #92400e
    classDef domain fill: #fecaca, stroke: #ef4444, stroke-width: 2px, color: #991b1b
    classDef repository fill: #e9d5ff, stroke: #a855f7, stroke-width: 2px, color: #6b21a8
    classDef data fill: #e5e7eb, stroke: #6b7280, stroke-width: 2px, color: #1f2937
    class Browser,SinglePlayer,MultiPlayer,GameBoard,PiniaStore client
    class MineController,MultiController controller
    class MineService,MultiService,Echo,Reverb service
    class GameService,Tile,Board domain
    class RoomRepo,MinesweeperRepo repository
    class DB,Cache,Session data
